pip install opencv-python
pip install matplotlib

import cv2
import numpy as np
from matplotlib import pyplot as plt

def apply_morphological_operations(image, operation, kernel_size=(5, 5)):
    kernel = np.ones(kernel_size, np.uint8)
    
    if operation == 'erosion':
        result = cv2.erode(image, kernel, iterations=1)
    elif operation == 'dilation':
        result = cv2.dilate(image, kernel, iterations=1)
    elif operation == 'opening':
        result = cv2.morphologyEx(image, cv2.MORPH_OPEN, kernel)
    elif operation == 'closing':
        result = cv2.morphologyEx(image, cv2.MORPH_CLOSE, kernel)
    else:
        raise ValueError("Invalid operation. Supported operations: 'erosion', 'dilation', 'opening', 'closing'")
    
    return result

# Load an example image
image = cv2.imread('th.jpg', cv2.IMREAD_GRAYSCALE)

# Apply morphological operations
erosion_result = apply_morphological_operations(image, 'erosion')
dilation_result = apply_morphological_operations(image, 'dilation')
opening_result = apply_morphological_operations(image, 'opening')
closing_result = apply_morphological_operations(image, 'closing')

# Display results
plt.figure(figsize=(10, 10))

plt.subplot(2, 3, 1)
plt.imshow(image, cmap='gray')
plt.title('Original Image')

plt.subplot(2, 3, 2)
plt.imshow(erosion_result, cmap='gray')
plt.title('Erosion')

plt.subplot(2, 3, 3)
plt.imshow(dilation_result, cmap='gray')
plt.title('Dilation')

plt.subplot(2, 3, 4)
plt.imshow(opening_result, cmap='gray')
plt.title('Opening')

plt.subplot(2, 3, 5)
plt.imshow(closing_result, cmap='gray')
plt.title('Closing')

plt.show()
